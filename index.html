
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>UniSpot - Consultoria Imobiliária</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
</head>
<body class="bg-cover bg-center text-gray-800 relative" style="background-image: url('bg-imovel.jpg'); backdrop-filter: brightness(0.95);">

  <header class="bg-blue-700 text-white p-6 text-center bg-opacity-80">
    <img src="logo-unispot.png" alt="Logo UniSpot" class="mx-auto mb-4 w-72">
    <p class="text-lg">Seu imóvel perto da USP, UNESP, USC ou Uninove? Cadastre-se e receba propostas de investidores!</p>
  </header>

  <main class="max-w-3xl mx-auto p-6 bg-white bg-opacity-90 rounded-xl shadow-lg my-8">
    <h2 class="text-2xl font-semibold mb-4 text-blue-700">Bem-vindo à UniSpot</h2>
    <p>Cadastre seu imóvel ou escolha entre as opções na lateral 👉</p>
  </main>

  <aside class="hidden lg:block fixed right-0 top-24 w-96 max-h-[calc(100vh-6rem)] overflow-y-auto p-4 z-40 bg-white bg-opacity-80 rounded-l-xl shadow">
    <h3 class="text-blue-700 font-semibold text-lg mb-2">Filtros</h3>
    <div class="flex flex-wrap gap-2 mb-4" id="filtros"></div>
    <div id="galeria" class="space-y-6"></div>
  </aside>

  <footer class="text-center p-4 text-sm text-gray-500 mt-10 bg-white bg-opacity-80">
    © 2025 UniSpot Consultoria Imobiliária - Bauru-SP
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
  <script>
    const planilhaID = "18qmymHgDDJ1alNfsUnTp3jztgOmZHs-U6S5l7OfzMtI";
    const abaNome = "ativos";
    let todosImoveis = [];

    const filtros = { tipo: new Set(), regiao: new Set() };

    async function carregarImoveis() {
      const url = `https://opensheet.elk.sh/${planilhaID}/${abaNome}`;
      const resp = await fetch(url);
      const dados = await resp.json();
      todosImoveis = dados;
      dados.forEach(item => {
        filtros.tipo.add(item["Tipo"]);
        filtros.regiao.add(item["Região"]);
      });
      criarBotoesFiltro();
      renderizarImoveis();
    }

    function criarBotoesFiltro() {
      const container = document.getElementById("filtros");
      container.innerHTML = '';
      filtros.tipo.forEach(valor => {
        const btn = document.createElement("button");
        btn.textContent = valor;
        btn.className = "px-3 py-1 bg-blue-100 rounded hover:bg-blue-200";
        btn.onclick = () => filtrar("Tipo", valor);
        container.appendChild(btn);
      });
      filtros.regiao.forEach(valor => {
        const btn = document.createElement("button");
        btn.textContent = valor;
        btn.className = "px-3 py-1 bg-green-100 rounded hover:bg-green-200";
        btn.onclick = () => filtrar("Região", valor);
        container.appendChild(btn);
      });
      const limpar = document.createElement("button");
      limpar.textContent = "Limpar Filtro";
      limpar.className = "px-3 py-1 bg-gray-200 rounded hover:bg-gray-300";
      limpar.onclick = () => renderizarImoveis();
      container.appendChild(limpar);
    }

    function filtrar(campo, valor) {
      const filtrados = todosImoveis.filter(item => item[campo] === valor);
      renderizarImoveis(filtrados);
    }

    function renderizarImoveis(lista = todosImoveis) {
      const galeria = document.getElementById("galeria");
      galeria.innerHTML = "";
      lista.forEach((item, idx) => {
        const fotos = item["Links das fotos"].split(",").map(f => f.trim());
        const swiperID = `swiper-${idx}`;
        const card = document.createElement("div");
        card.className = "bg-white bg-opacity-90 rounded-xl shadow p-3 border";
        card.innerHTML = `
          <div class="swiper" id="${swiperID}">
            <div class="swiper-wrapper">
              ${fotos.map(link => `<div class="swiper-slide"><img src="${link}" class="w-full h-40 object-cover rounded"></div>`).join("")}
            </div>
            <div class="swiper-pagination"></div>
          </div>
          <p class="text-sm font-semibold text-blue-700 mt-2">${item["Tipo"]} - ${item["Região"]}</p>
          <p class="text-sm text-gray-700">${item["Nome"]}</p>`;
        galeria.appendChild(card);
        new Swiper(`#${swiperID}`, { pagination: { el: '.swiper-pagination' } });
      });
    }

    carregarImoveis();
  </script>

</body>
</html>
